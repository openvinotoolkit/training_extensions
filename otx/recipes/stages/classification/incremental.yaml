_base_:
  [
    "./train.yaml",
    "../_base_/models/classifiers/classifier.py",
  ]

runner:
  max_epochs: 20

# optimizer_config:
#   type: SAMOptimizerHook

optimizer:
  type: SGD
  lr: 0.01
  momentum: 0.9
  weight_decay: 0.0001

evaluation:
  metric: ["accuracy", "class_accuracy"]

lr_config:
  policy: ReduceLROnPlateau
  metric: accuracy
  patience: 1
  iteration_patience: 0
  interval: 1
  min_lr: 0.000001
  warmup: linear
  warmup_iters: 1
  warmup_ratio: 0.333

task_adapt:
  type: "mpa"
  op: "REPLACE"

custom_hooks: [
  {
    type: LazyEarlyStoppingHook,
    start: 3,
    patience: 3,
    iteration_patience: 0,
    metric: accuracy,
    interval: 1,
    priority: 75,
  }
]

ignore: True
adaptive_validation_interval:
  max_interval: 5
  enable_adaptive_interval_hook: True
  enable_eval_before_run: True
