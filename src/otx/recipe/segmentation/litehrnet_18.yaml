# @package _global_
defaults:
  - override /base: segmentation
  - override /callbacks: segmentation
  - override /data: segmentation
  - override /model: mmseg
data:
  train_subset:
    batch_size: 8
    transforms:
      - type: LoadImageFromFile
      - reduce_zero_label: true
        type: LoadAnnotations
      - keep_ratio: false
        ratio_range:
          - 0.5
          - 2.0
        scale:
          - 544
          - 544
        type: RandomResize
      - cat_max_ratio: 0.75
        crop_size:
          - 512
          - 512
        type: RandomCrop
      - prob: 0.5
        type: RandomFlip
      - type: PhotoMetricDistortion
      - type: PackSegInputs
  val_subset:
    batch_size: 1
    transforms:
      - type: LoadImageFromFile
      - keep_ratio: false
        scale:
          - 544
          - 544
        type: Resize
      - reduce_zero_label: true
        type: LoadAnnotations
      - type: PackSegInputs
  test_subset:
    batch_size: 1
    transforms:
      - type: LoadImageFromFile
      - keep_ratio: false
        scale:
          - 544
          - 544
        type: Resize
      - reduce_zero_label: true
        type: LoadAnnotations
      - type: PackSegInputs
model:
  otx_model:
    _target_: otx.algo.segmentation.litehrnet.LiteHRNet
    variant: 18
  optimizer:
    _target_: torch.optim.Adam
    _partial_: true
    lr: 0.001
    betas: [0.9, 0.999]
    weight_decay: 0.0
  scheduler:
    _target_: torch.optim.lr_scheduler.ReduceLROnPlateau
    _partial_: true
    mode: min
    factor: 0.1
    patience: 10
