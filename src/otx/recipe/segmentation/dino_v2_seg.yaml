# @package _global_
defaults:
  - override /base: segmentation
  - override /callbacks: segmentation
  - override /data: segmentation
  - override /model: mmseg
data:
  train_subset:
    batch_size: 8
    transforms:
      - type: LoadImageFromFile
      - reduce_zero_label: true
        type: LoadAnnotations
      - keep_ratio: false
        ratio_range:
          - 0.5
          - 2.0
        scale:
          - 640
          - 640
        type: RandomResize
      - cat_max_ratio: 0.75
        crop_size:
          - 560
          - 560
        type: RandomCrop
      - prob: 0.5
        type: RandomFlip
      - type: PhotoMetricDistortion
      - type: PackSegInputs
  val_subset:
    batch_size: 1
    transforms:
      - type: LoadImageFromFile
      - keep_ratio: false
        scale:
          - 560
          - 560
        type: Resize
      - reduce_zero_label: true
        type: LoadAnnotations
      - type: PackSegInputs
  test_subset:
    batch_size: 1
    transforms:
      - type: LoadImageFromFile
      - keep_ratio: false
        scale:
          - 560
          - 560
        type: Resize
      - reduce_zero_label: true
        type: LoadAnnotations
      - type: PackSegInputs
model:
  otx_model:
    _target_: otx.algo.segmentation.dino_v2_seg.DinoV2Seg
  optimizer:
    _target_: torch.optim.AdamW
    _partial_: true
    lr: 0.001
    betas: [0.9, 0.999]
    weight_decay: 0.0001
  scheduler:
    total_iters: 100
    power: 0.9
    last_epoch: -1
