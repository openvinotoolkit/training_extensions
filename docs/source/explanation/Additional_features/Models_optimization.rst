Models Optimization
===================

| OTX provides two types of optimization algorithms: `Post-training Optimization Tool (POT) <https://docs.openvino.ai/latest/pot_introduction.html#doxid-pot-introduction>`_ and `Neural Network Compression Framework (NNCF) <https://github.com/openvinotoolkit/nncf>`_.
| Post-training Optimization is designed to optimize the inference of models by applying post-training methods that do not require model retraining or fine-tuning. If you want more details about how POT works and to be more familiar with model optimization methods, please refer to `documentation <https://docs.openvino.ai/latest/pot_introduction.html#doxid-pot-introduction>`_.
| To run Post-training optimization it is required to convert the model to OpenVINOâ„¢ intermediate representation (IR) first. To perform fast and accurate quantization we use ``DefaultQuantization Algorithm`` for each task. Please, see the `DefaultQuantization Parameters <https://docs.openvino.ai/latest/pot_compression_algorithms_quantization_default_README.html#doxid-pot-compression-algorithms-quantization-default-r-e-a-d-m-e>`_ for further information about configuring the optimization.
| POT parameters can be found and configured in ``template.yaml`` and ``configuration.yaml`` for each task. For Anomaly tasks, we have separate configuration files for POT, that can be found in the same directory with ``template.yaml``, for example for `PaDiM <https://github.com/openvinotoolkit/training_extensions/blob/develop/external/anomaly/configs/classification/padim/pot_optimization_config.json>`_.


| NNCF utilizes Training-time Optimization algorithms. It is a set of advanced algorithms for training-time model optimization within the Deep Learning framework such as Pytorch.
| The process of optimization is controlled by the NNCF configuration file. A JSON configuration file is used for easier setup of the parameters of the compression algorithm. See `configuration file description <https://github.com/openvinotoolkit/nncf/blob/develop/docs/ConfigFile.md>`_.
| You can refer to configuration files for default templates for each task accordingly: `Classificaiton <https://github.com/openvinotoolkit/training_extensions/blob/feature/otx/external/deep-object-reid/configs/ote_custom_classification/efficientnet_b0/compression_config.json>`_, `Object Detection <https://github.com/openvinotoolkit/training_extensions/blob/feature/otx/external/mmdetection/configs/custom-object-detection/gen3_mobilenetV2_ATSS/compression_config.json>`_, `Semantic segmentation <https://github.com/openvinotoolkit/training_extensions/blob/feature/otx/external/mmsegmentation/configs/custom-sematic-segmentation/ocr-lite-hrnet-s-mod2/compression_config.json>`_, `Instance segmentation <https://github.com/openvinotoolkit/training_extensions/blob/feature/otx/external/mmdetection/configs/custom-counting-instance-seg/efficientnetb2b_maskrcnn/compression_config.json>`_, `Anomaly classification <https://github.com/openvinotoolkit/training_extensions/blob/feature/otx/external/anomaly/configs/classification/padim/compression_config.json>`_, `Anomaly Detection <https://github.com/openvinotoolkit/training_extensions/blob/feature/otx/external/anomaly/configs/detection/padim/compression_config.json>`_, `Anomaly segmentation <https://github.com/openvinotoolkit/training_extensions/blob/feature/otx/external/anomaly/configs/segmentation/padim/compression_config.json>`_. Configs for other templates can be found in the same directory.


| NNCF tends to provide better quality in terms of preserving accuracy as it uses training compression approaches. `Here <https://github.com/openvinotoolkit/nncf#nncf-compressed-model-zoo>`_ can be found compression results achievable with the NNCF. Meanwhile, Post-training optimization is faster but can degrade accuracy more than the training-enabled approach.
| The main recommendation is to start with post-training compression and use NNCF compression during training if you are not satisfied with the results.
| Please, refer to our `dedicated tutorials <LINK>` on how to optimize your model using POT or NNCF.