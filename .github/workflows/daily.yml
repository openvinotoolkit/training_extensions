name: Daily Test

on:
  workflow_dispatch: # run on request (no need for PR)
  schedule:
    # every UTC 7PM from Mon to Fri
    - cron: "0 19 * * 1-5"

# This is what will cancel the workflow concurrency
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  Run-e2e-tests-action:
    uses: ./.github/workflows/run_tests_in_tox.yml
    with:
      python-version: "310"
      toxenv-pyver: "py310"
      toxenv-task: "act"
      tests-dir: "tests/e2e/cli/action"
      upload-artifact: true
  Run-e2e-tests-anomaly:
    uses: ./.github/workflows/run_tests_in_tox.yml
    with:
      python-version: "310"
      toxenv-pyver: "py310"
      toxenv-task: "ano"
      tests-dir: "tests/e2e/cli/anomaly"
      upload-artifact: true
  Run-e2e-tests-classification:
    uses: ./.github/workflows/run_tests_in_tox.yml
    with:
      python-version: "310"
      toxenv-pyver: "py310"
      toxenv-task: "cls"
      tests-dir: "tests/e2e/cli/classification"
      upload-artifact: true
  Run-e2e-tests-detection:
    uses: ./.github/workflows/run_tests_in_tox.yml
    with:
      python-version: "310"
      toxenv-pyver: "py310"
      toxenv-task: "det"
      tests-dir: "tests/e2e/cli/detection"
      upload-artifact: true
  Run-e2e-tests-instance_segmentation:
    uses: ./.github/workflows/run_tests_in_tox.yml
    with:
      python-version: "310"
      toxenv-pyver: "py310"
      toxenv-task: "iseg"
      tests-dir: "tests/e2e/cli/instance_segmentation"
      upload-artifact: true
  Run-e2e-tests-semantic_segmentation:
    uses: ./.github/workflows/run_tests_in_tox.yml
    with:
      python-version: "310"
      toxenv-pyver: "py310"
      toxenv-task: "seg"
      tests-dir: "tests/e2e/cli/semantic_segmentation"
      upload-artifact: true
